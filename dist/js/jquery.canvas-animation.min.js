!function(e){e.fn.canvasAnimationEditor=function(s){var a=this;e("*",a).click(function(){a.hide(),e("*",a).removeClass("jca-active-element"),e('[name="jca_top"]').val(parseFloat(e(this).css("top"))),e('[name="jca_left"]').val(parseFloat(e(this).css("left"))),e('[name="jca_width"]').val(parseFloat(e(this).css("width"))),e('[name="jca_height"]').val(parseFloat(e(this).css("height"))),e(this).addClass("jca-active-element"),a.show()})}}(jQuery),function(f){f.fn.canvasAnimation=function(n){var a,l=this,s=(n=f.extend({steps:[],timeout:0,resetDuration:500,infinity:!0,autoplay:!0,controls:!0,editor:!0,fontawesomeVersion:null,controlsWrapper:".jca-controls",backwardButton:".jca-backward",playButton:".jca-play",pauseButton:".jca-pause",resetButton:".jca-reset",forwardButton:".jca-forward",expandButton:".jca-expand",classDone:"jca-done",classWait:"jca-wait",classForward:"jca-forward",classBackward:"jca-backward",classWrap:"jca-wrap",controlsTemplate:'<div class="jca-controls"><div class="jca-backward"></div><div class="jca-play"></div><div class="jca-pause"></div><div class="jca-reset"></div><div class="jca-forward"></div><div class="jca-expand"></div></div>',onPlay:null,onDone:null,onWait:null},n)).infinity,o=[],c=-1,e=f(n.controlsTemplate);switch(l.wrap('<div class="'+n.classWrap+'"></div>'),parseInt(n.fontawesomeVersion)){case 4:case 5:var t="fa";5===parseInt(n.fontawesomeVersion)&&(t="fas"),f("html").addClass("jca-fontawesome"),e.find(n.backwardButton).append('<i class="'+t+' fa-step-backward"></i>'),e.find(n.playButton).append('<i class="'+t+' fa-play"></i>'),e.find(n.pauseButton).append('<i class="'+t+' fa-pause"></i>'),e.find(n.resetButton).append('<i class="'+t+' fa-stop"></i>'),e.find(n.forwardButton).append('<i class="'+t+' fa-step-forward"></i>'),e.find(n.expandButton).append('<i class="'+t+' fa-expand"></i>')}n.controls&&l.closest("."+n.classWrap).append(e.clone()),n.editor&&l.canvasAnimationEditor();var i=function(s){s&&s()},r=function(){var t=n.timeout;o=[],l.hasClass(n.classDone)&&u(),l.hasClass(n.forwardButton.substring(1))&&c--,l.hasClass(n.classDone)&&(l.removeClass(n.classDone),t+=n.resetDuration),l.removeClass(n.classWait),i(n.onPlay),f.each(n.steps,function(s,a){if(c<s){var e=setTimeout(function(){c=s,l.addClass(a.addClass),l.removeClass(a.removeClass),"boolean"==typeof a.pause&&!0===a.pause&&(n.infinity=!1,p(!1)),n.steps.length-1===s&&d(a.duration)},t);"number"!=typeof a.duration&&(a.duration=500),t+=a.duration,o.push(e)}})},d=function(s){a=setTimeout(function(){l.addClass(n.classDone),l.hasClass(n.classWait)||(n.infinity?r():i(n.onDone))},s)},u=function(){f.each(n.steps,function(s,a){l.removeClass(a.addClass)}),c=-1},p=function(s){0<o.length&&(f.each(o,function(s,a){clearTimeout(o[s])}),s&&u(),l.addClass(n.classWait),i(n.onWait),void 0!==a&&clearTimeout(a))};n.autoplay?r():(l.addClass(n.classWait),i(n.onWait)),n.editor||l.click(function(){n.infinity=s,(l.hasClass(n.classDone)||l.hasClass(n.classWait))&&r()}),l.next(n.controlsWrapper).find(n.backwardButton).click(function(){(l.hasClass(n.classDone)||l.hasClass(n.classWait))&&(l.hasClass(n.classForward)&&c--,l.removeClass(n.classForward),l.addClass(n.classBackward),c<0&&(c=n.steps.length),c===n.steps.length?f.each(n.steps,function(s,a){l.addClass(a.addClass),l.removeClass(a.removeClass)}):(l.removeClass(n.steps[c].addClass),l.addClass(n.steps[c].removeClass)),c--)}),l.next(n.controlsWrapper).find(n.playButton).click(function(){n.infinity=s,(l.hasClass(n.classDone)||l.hasClass(n.classWait))&&r()}),l.next(n.controlsWrapper).find(n.pauseButton).click(function(){n.infinity=!1,p(!1)}),l.next(n.controlsWrapper).find(n.resetButton).click(function(){n.infinity=!1,p(!0),u(),l.removeClass(n.classDone),l.addClass(n.classWait),i(n.onWait)}),l.next(n.controlsWrapper).find(n.forwardButton).click(function(){(l.hasClass(n.classDone)||l.hasClass(n.classWait))&&(l.hasClass(n.classBackward)&&c++,l.addClass(n.classForward),l.removeClass(n.classBackward),(c>n.steps.length||-1===c)&&(c=0),c===n.steps.length?u():(l.addClass(n.steps[c].addClass),l.removeClass(n.steps[c].removeClass)),c++)}),l.next(n.controlsWrapper).find(n.expandButton).click(function(){var s;(s=l[0]).requestFullscreen?s.requestFullscreen():s.mozRequestFullScreen?s.mozRequestFullScreen():s.msRequestFullscreen?s.msRequestFullscreen():s.webkitRequestFullscreen&&s.webkitRequestFullscreen()})}}(jQuery);