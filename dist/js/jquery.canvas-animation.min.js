!function(s){s.fn.canvasAnimation=function(e){var t=this,e=s.extend({steps:[],timeout:0,reset_duration:500,infinity:!0,autoplay:!0,controls:!0,controls_fa:null,controls_wrapper:".controls",play_button:".play",pause_button:".pause",reset_button:".reset",fullscreen_button:".fullscreen",class_done:"done",class_wait:"wait",class_wrap:"canvas-animation",controls_template:'<div class="controls"><div class="play #PLAY#"></div><div class="pause #PAUSE#"></div><div class="reset #RESET#"></div><div class="fullscreen #FULLSCREEN#"></div></div>',callback_play:null,callback_done:null,callback_wait:null},e),a=e.infinity;switch(t.wrap('<div class="'+e.class_wrap+'"></div>'),parseInt(e.controls_fa)){case 4:case 5:var l="fa";5===parseInt(e.controls_fa)&&(l="fas"),e.controls_template=e.controls_template.replace("#PLAY#",l+" fa-play"),e.controls_template=e.controls_template.replace("#PAUSE#",l+" fa-pause"),e.controls_template=e.controls_template.replace("#RESET#",l+" fa-stop"),e.controls_template=e.controls_template.replace("#FULLSCREEN#",l+" fa-expand");break;default:e.controls_template=e.controls_template.replace("#PLAY#",""),e.controls_template=e.controls_template.replace("#PAUSE#",""),e.controls_template=e.controls_template.replace("#RESET#",""),e.controls_template=e.controls_template.replace("#FULLSCREEN#","")}e.controls&&t.closest("."+e.class_wrap).append(e.controls_template);var n=function(s){s&&s()},c=function(s){s.requestFullscreen?s.requestFullscreen():s.mozRequestFullScreen?s.mozRequestFullScreen():s.msRequestFullscreen?s.msRequestFullscreen():s.webkitRequestFullscreen&&s.webkitRequestFullscreen()},o=function(){var a=e.timeout;r(),t.hasClass(e.class_done)&&(t.removeClass(e.class_done),a+=e.reset_duration),t.removeClass(e.class_wait),n(e.callback_play),s.each(e.steps,function(s,l){setTimeout(function(){t.addClass(l.addClass),t.removeClass(l.removeClass)},a),a+=l.duration,e.steps.length-1===s&&setTimeout(function(){t.addClass(e.class_done),e.infinity?o():n(e.callback_done)},a)})},r=function(){s.each(e.steps,function(s,e){t.removeClass(e.addClass)})};e.autoplay?o():(t.addClass(e.class_wait),n(e.callback_wait)),t.click(function(){e.infinity=a,(t.hasClass(e.class_done)||t.hasClass(e.class_wait))&&o()}),t.next(e.controls_wrapper).find(e.play_button).click(function(){e.infinity=a,(t.hasClass(e.class_done)||t.hasClass(e.class_wait))&&o()}),t.next(e.controls_wrapper).find(e.pause_button).click(function(){e.infinity=!1}),t.next(e.controls_wrapper).find(e.reset_button).click(function(){e.infinity=!1,t.hasClass(e.class_done)&&(r(),t.addClass(e.class_wait),t.removeClass(e.class_done),n(e.callback_wait))}),t.next(e.controls_wrapper).find(e.fullscreen_button).click(function(){c(t[0])})}}(jQuery);